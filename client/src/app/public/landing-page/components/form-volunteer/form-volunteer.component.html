<div class="w-full h-screen flex items-start">

    <div class="flex justify-center">
        <mat-stepper labelPosition="bottom"  linear #stepper class="w-full mt-4">
            <mat-step [stepControl]="firstFormGroup" [editable]="isEditable">
                <form [formGroup]="firstFormGroup" class="flex flex-col gap-4">
                  <div>
                    <input matInput formControlName="nameUser" placeholder="Nombre de usuario" required class="border border-gray-300 rounded-md p-2 py-6 mt-2 w-full outline-none custom-input" autocomplete="off">
                    <div>
                        <mat-error *ngIf="firstFormGroup.controls['nameUser'].hasError('required') && firstFormGroup.controls['nameUser'].touched">El nombre de usuario es requerido.</mat-error>
                        <mat-error *ngIf="firstFormGroup.controls['nameUser'].hasError('minlength')">El nombre de usuario debe tener al menos 3 caracteres.</mat-error>
                        <mat-error *ngIf="firstFormGroup.controls['nameUser'].hasError('maxlength')">El nombre de usuario debe tener como máximo 20 caracteres.</mat-error>
                    </div>
                  </div> 
                  <div>
                      <input matInput formControlName="password" placeholder="Contraseña" required class=" border border-gray-300 rounded-md p-2 py-6 w-full outline-none custom-input" [type]="showPassword ? 'text' : 'password'" autocomplete="off">
                    <div>
                      <mat-error *ngIf="firstFormGroup.controls['password'].hasError('required') && firstFormGroup.controls['password'].touched">La contraseña es requerida.</mat-error>
                    </div>
                  </div>
                  <div>
                    <input matInput formControlName="confirmPassword" placeholder="Confirma contraseña" required class="border border-gray-300 rounded-md p-2 py-6 w-full outline-none custom-input" [type]="showPassword ? 'text' : 'password'" autocomplete="off">
                    <div>
                      <mat-error *ngIf="firstFormGroup.controls['confirmPassword'].hasError('required') && firstFormGroup.controls['confirmPassword'].touched">Debes confirmar la contraseña.</mat-error>
                      <mat-error *ngIf="firstFormGroup.hasError('passwordMismatch') && firstFormGroup.controls['confirmPassword'].touched && firstFormGroup.controls['confirmPassword'].value !== ''">Las contraseñas no coinciden.</mat-error>
                    </div>
                  </div>
                  <div>
                    <input matInput formControlName="writeYourEmail" placeholder="Escribe tu correo electrónico" required class="border border-gray-300 rounded-md p-2 py-6 w-full outline-none custom-input" autocomplete="off" email>
                    <div>
                        <mat-error *ngIf="firstFormGroup.controls['writeYourEmail'].hasError('required') && firstFormGroup.controls['writeYourEmail'].touched">El correo electrónico es requerido.</mat-error>
                        <mat-error *ngIf="firstFormGroup.controls['writeYourEmail'].hasError('email') && firstFormGroup.controls['writeYourEmail'].touched">El formato del correo electrónico es incorrecto.</mat-error>
                    </div>
                  </div>
                  <div>
                    <div class="border border-gray-300 rounded-md p-2 mt-2">
                        <mat-select formControlName="typeUser" placeholder="Voluntario o institución" required class="w-full focus:border-transparent outline-none custom-input">
                          <mat-option value="opcion1">Voluntario</mat-option>
                          <mat-option value="opcion2">Institución</mat-option>
                        </mat-select>
                    </div>
                  </div>
                  <div>
                    <div class="border border-gray-300 rounded-md p-2">
                        <input matInput formControlName="nameUsernameUser" placeholder="Nombre y apellido" required class="w-full focus:border-transparent outline-none custom-input" autocomplete="off">
                    </div>
                    <div>
                        <mat-error *ngIf="firstFormGroup.controls['nameUsernameUser'].hasError('required') && firstFormGroup.controls['nameUsernameUser'].touched">El nombre y apellido son requeridos.</mat-error>
                    </div>
                  </div>
                  <div>
                    <button matStepperNext class="bg-blue-700 text-white px-4 py-2 rounded-md" (click)="markAllAsTouched()">Siguiente</button>
                  </div>
                </form>
              </mat-step>
            <mat-step [stepControl]="secondFormGroup" [editable]="isEditable">
              <form [formGroup]="secondFormGroup" class="flex flex-col gap-4">
                <div>
                    <div class="border border-gray-300 rounded-md p-2">
                        <mat-select formControlName="Sex" placeholder="Sexo" required class="w-full focus:border-transparent outline-none custom-input">
                          <mat-option value="opcion1">Femenino</mat-option>
                          <mat-option value="opcion2">Masculino</mat-option>
                        </mat-select>
                    </div>
                </div>

                <div>
                    <div class="border border-gray-300 rounded-md p-2">
                        <div class="flex items-center"> <!-- Utilizamos flexbox para alinear horizontalmente -->
                          <a href="javascript:void(0)" (click)="openDatePicker()"  class="w-full focus:border-transparent outline-none custom-input">
                            <input matInput [matDatepicker]="datePicker" formControlName="birthdate" 
                            placeholder="Fecha de nacimiento" [readonly]="true" 
                            required class="w-full focus:border-transparent outline-none custom-input" 
                            autocomplete="off">
                          </a>
                          <mat-datepicker-toggle matSuffix [for]="datePicker"></mat-datepicker-toggle>
                        </div>
                        <mat-datepicker #datePicker></mat-datepicker>
                    </div>
                    <!-- <div>
                        <mat-error *ngIf="secondFormGroup.controls['birthdate'].hasError('required') && secondFormGroup.controls['birthdate'].touched">La fecha de nacimiento es requerida.</mat-error>
                    </div> -->
                </div>

                <div>
                  <div class="border border-gray-300 rounded-md p-2">
                      <mat-select formControlName="country" placeholder="Pais" required class="w-full focus:border-transparent outline-none custom-input">
                          <mat-option *ngFor="let country of countriesData" [value]="country">{{ country }}</mat-option>
                      </mat-select>
                  </div>
                </div>

                <div>
                    <div class="mt-2">
                        <input matInput formControlName="address" placeholder="Direccion" required class="w-full border border-gray-300 rounded-md p-2 py-6 outline-none custom-input" autocomplete="off">
                    </div>
                    <div>
                    </div>
                </div>
                <div>
                    <div class="mt-2">
                        <input matInput formControlName="location" placeholder="Localidad" required class="border border-gray-300 rounded-md p-2 py-6 w-full outline-none custom-input" autocomplete="off">
                    </div>
                    <div>
                    </div>
                </div>

                <div>
                    <div class="border border-gray-300 rounded-md p-2">
                        <mat-select formControlName="province" placeholder="Provincia" required class="w-full focus:border-transparent outline-none custom-input">
                          <mat-option value="opcion1">Buenos Aires</mat-option>
                          <mat-option value="opcion2">Catamarca</mat-option>
                        </mat-select>
                    </div>
                </div>
                <div>
                    <div class="mt-2">
                        <input matInput formControlName="documentNumber" [placeholder]="getDocumentPlaceholder()"
                        [attr.pattern]="getDocumentPattern() || null" required class="border border-gray-300 rounded-md p-2 py-6 w-full outline-none custom-input" autocomplete="off">
                    </div>
                    <div>
                      <mat-error *ngIf="documentNumberControl?.hasError('pattern')">
                        Formato de documento incorrecto.
                      </mat-error>
                    </div>
                </div>
                <div>
                  <div class="border border-gray-300 rounded-md p-2 mt-2">
                    <input matInput formControlName="cellphoneNumber" placeholder="Numero de Celular" required  class="w-full focus:border-transparent outline-none custom-input" autocomplete="off">
                  </div>
                  <div>
                  </div>
                </div>


                <div>
                  <button matStepperNext class="bg-blue-700 text-white px-4 py-2 rounded-md">Siguiente</button>
                </div>
              </form>
            </mat-step>
            <mat-step [stepControl]="thirdFormGroup" [editable]="isEditable">
                <form [formGroup]="thirdFormGroup" class="flex flex-col gap-4">
                    <div>
                        <div class="border border-gray-300 rounded-md p-2">
                            <mat-select formControlName="timeAvailability" placeholder="Disponibilidad Horaria" required class="w-full focus:border-transparent outline-none custom-input">
                              <mat-option value="opcion1">Mañana</mat-option>
                              <mat-option value="opcion2">Tarde</mat-option>
                            </mat-select>
                        </div>
                    </div>
                    <div>
                        <div class="border border-gray-300 rounded-md p-2 mt-2">
                            <input matInput formControlName="profession" placeholder="Profesión" required class="w-full focus:border-transparent outline-none custom-input" autocomplete="off">
                        </div>
                        <div>
                        </div>
                    </div>

                    <div>
                      <div class="border border-gray-300 rounded-md p-2">
                        <mat-select formControlName="skillsHobbies" placeholder="Habilidades o pasatiempos" required class="w-full focus:border-transparent outline-none custom-input" multiple>
                          <mat-option *ngFor="let option of dataSkillHobbies" [value]="option.value" [class.mat-selected]="isSelected(option)" (click)="toggleOption(option)">
                            {{ option.label }}
                          </mat-option>
                        </mat-select>
                      </div>
                    </div>
                    <div>
                        <button class="bg-blue-700 text-white px-4 py-2 rounded-md" (click)="resetFormAndSaveData()">Enviar</button>
                    </div>
                </form>
            </mat-step>
          </mat-stepper>
    </div>
</div>
